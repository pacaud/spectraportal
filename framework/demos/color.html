<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Spectra — Tokens Preview (Hex + Nearest Name + Text Shadow)</title>

  <!-- Framework first, theme after -->
  <link rel="stylesheet" href="https://spectraportal.dev/framework/cdn/v0.1/spectra.min.css" />
  <link rel="stylesheet" href="https://spectraportal.dev/framework/cdn/v0.1/theme.min.css" /> 
  <link rel="stylesheet" href="/overrides.css" />
</head>

<body>
  <main class="sp-container sp-demo sp-stack">
    <header class="sp-stack">
      <h1 class="sp-demo__title">Spectra — Tokens Preview</h1>
      <p class="sp-demo__lede">
        Token preview (no inline styles). <code class="sp-code">--sp-*</code>
      </p>
    </header>

    <section class="sp-card sp-stack">
      <h2 class="sp-card__title">Color tokens</h2>

      <table id="colors" class="sp-table sp-token-table">
        <thead>
          <tr>
            <th class="sp-th">Preview</th>
            <th class="sp-th">Token</th>
            <th class="sp-th">Name</th>
            <th class="sp-th">Hex</th>
            <th class="sp-th">Nearest name</th>
          </tr>
        </thead>

        <tbody id="color-rows">
          <tr data-token="--sp-bg" data-name="Background" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--bg" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-bg</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-surface" data-name="Surface" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--surface" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-surface</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-elev" data-name="Elevation" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--elev" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-elev</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-elev-2" data-name="Elevation 2" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--elev-2" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-elev-2</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-text" data-name="Text" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--text" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-text</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-muted" data-name="Muted Text" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--muted" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-muted</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-subtle" data-name="Subtle" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--subtle" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-subtle</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-border" data-name="Border" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--border" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-border</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-border-strong" data-name="Border Strong" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--border-strong" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-border-strong</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-accent" data-name="Accent (Kevin)" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--accent" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-accent</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-accent-2" data-name="Accent 2 (Vivi)" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--accent-2" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-accent-2</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-accent-3" data-name="Accent 3 (Voxia)" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--accent-3" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-accent-3</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-success" data-name="Success" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--success" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-success</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-warning" data-name="Warning" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--warning" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-warning</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-danger" data-name="Danger" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--danger" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-danger</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>

          <tr data-token="--sp-info" data-name="Info" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--info" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-info</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-hex"><code class="sp-code">—</code></td>
            <td class="sp-td js-colorname"><code class="sp-code">—</code></td>
          </tr>
        </tbody>
      </table>
    </section>

    <section class="sp-card sp-stack">
      <h2 class="sp-card__title">Shadow tokens</h2>

      <table class="sp-table sp-token-table">
        <thead>
          <tr>
            <th class="sp-th">Preview</th>
            <th class="sp-th">Token</th>
            <th class="sp-th">Name</th>
            <th class="sp-th">Value</th>
          </tr>
        </thead>
        <tbody>
          <tr data-shadow="--sp-shadow-1" data-name="Shadow 1" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--shadow-1" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-shadow-1</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-val"><code class="sp-code">—</code></td>
          </tr>

          <tr data-shadow="--sp-shadow-2" data-name="Shadow 2" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--shadow-2" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-shadow-2</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-val"><code class="sp-code">—</code></td>
          </tr>

          <tr data-shadow="--sp-shadow-3" data-name="Shadow 3" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--shadow-3" aria-hidden="true"></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-shadow-3</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-val"><code class="sp-code">—</code></td>
          </tr>
        </tbody>
      </table>
    </section>

    <section class="sp-card sp-stack">
      <h2 class="sp-card__title">Text-shadow tokens</h2>

      <table class="sp-table sp-token-table">
        <thead>
          <tr>
            <th class="sp-th">Preview</th>
            <th class="sp-th">Token</th>
            <th class="sp-th">Name</th>
            <th class="sp-th">Value</th>
          </tr>
        </thead>
        <tbody>
          <tr data-textshadow="--sp-text-shadow-1" data-name="Text Shadow 1" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--textshadow-1" aria-hidden="true"><span class="sp-chip__text">Spectra</span></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-text-shadow-1</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-val"><code class="sp-code">—</code></td>
          </tr>

          <tr data-textshadow="--sp-text-shadow-2" data-name="Text Shadow 2" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--textshadow-2" aria-hidden="true"><span class="sp-chip__text">Spectra</span></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-text-shadow-2</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-val"><code class="sp-code">—</code></td>
          </tr>

          <tr data-textshadow="--sp-text-shadow-3" data-name="Text Shadow 3" class="sp-tr sp-token-row">
            <td class="sp-td sp-td--preview">
              <div class="sp-chip sp-chip--textshadow-3" aria-hidden="true"><span class="sp-chip__text">Spectra</span></div>
            </td>
            <td class="sp-td"><code class="sp-code">--sp-text-shadow-3</code></td>
            <td class="sp-td js-name"></td>
            <td class="sp-td js-val"><code class="sp-code">—</code></td>
          </tr>
        </tbody>
      </table>
    </section>

    <section class="sp-card sp-stack">
      <h2 class="sp-card__title">Link token</h2>

      <p class="sp-demo__linkrow">
        Link sample:
        <a href="#" id="link-sample" class="sp-link">--sp-link</a>
        <span id="link-meta" class="sp-demo__linkmeta"><code class="sp-code">—</code></span>
      </p>
    </section>

    <script>
      function getVar(name){
        return getComputedStyle(document.documentElement).getPropertyValue(name).trim();
      }

      function normalizeHex(hex){
        if(!hex || hex[0] !== "#") return null;
        const h = hex.trim();
        if(/^#([0-9a-f]{3})$/i.test(h)){
          const r=h[1], g=h[2], b=h[3];
          return ("#"+r+r+g+g+b+b).toLowerCase();
        }
        if(/^#([0-9a-f]{4})$/i.test(h)){
          const r=h[1], g=h[2], b=h[3], a=h[4];
          return ("#"+r+r+g+g+b+b+a+a).toLowerCase();
        }
        if(/^#([0-9a-f]{6})$/i.test(h)) return h.toLowerCase();
        if(/^#([0-9a-f]{8})$/i.test(h)) return h.toLowerCase();
        return null;
      }

      function rgbToHex(rgb){
        const m = rgb.match(/^rgba?\(([^)]+)\)$/i);
        if(!m) return null;
        const parts = m[1].split(",").map(s => s.trim());
        if(parts.length < 3) return null;

        const r = Math.max(0, Math.min(255, parseFloat(parts[0])));
        const g = Math.max(0, Math.min(255, parseFloat(parts[1])));
        const b = Math.max(0, Math.min(255, parseFloat(parts[2])));
        const a = parts.length >= 4 ? Math.max(0, Math.min(1, parseFloat(parts[3]))) : 1;

        const to2 = (n) => Math.round(n).toString(16).padStart(2, "0");
        const base = ("#" + to2(r) + to2(g) + to2(b)).toLowerCase();
        if(a >= 0.999) return base;
        return (base + to2(a * 255)).toLowerCase();
      }

      function toHex(value){
        return normalizeHex(value) || rgbToHex(value);
      }

      function hexToRgb(hex){
        const h = normalizeHex(hex);
        if(!h) return null;
        const hh = h.length === 9 ? h.slice(0,7) : h; // ignore alpha for naming
        return {
          r: parseInt(hh.slice(1,3), 16),
          g: parseInt(hh.slice(3,5), 16),
          b: parseInt(hh.slice(5,7), 16)
        };
      }

      function dist(a,b){
        const dr=a.r-b.r, dg=a.g-b.g, db=a.b-b.b;
        return dr*dr + dg*dg + db*db;
      }

      const NAMED = [
        ["Black","#000000"], ["White","#ffffff"],
        ["DimGray","#696969"], ["Gray","#808080"], ["SlateGray","#708090"],
        ["Gainsboro","#dcdcdc"],
        ["MidnightBlue","#191970"], ["Navy","#000080"], ["SteelBlue","#4682b4"],
        ["DodgerBlue","#1e90ff"], ["SkyBlue","#87ceeb"],
        ["Teal","#008080"], ["Cyan","#00ffff"],
        ["SeaGreen","#2e8b57"], ["ForestGreen","#228b22"], ["LimeGreen","#32cd32"],
        ["Gold","#ffd700"], ["Orange","#ffa500"], ["Tomato","#ff6347"],
        ["Crimson","#dc143c"], ["Red","#ff0000"],
        ["HotPink","#ff69b4"], ["Violet","#ee82ee"], ["Purple","#800080"],
        ["Indigo","#4b0082"]
      ];

      function nearestName(hex){
        const rgb = hexToRgb(hex);
        if(!rgb) return "—";
        let best = null;
        for(const [name, h] of NAMED){
          const rr = hexToRgb(h);
          const d = dist(rgb, rr);
          if(best === null || d < best.d) best = {name, d};
        }
        return best ? best.name : "—";
      }

      for (const row of document.querySelectorAll("tr[data-token]")){
        const token = row.getAttribute("data-token");
        const semName = row.getAttribute("data-name") || token;

        const val = getVar(token);
        const hex = toHex(val);

        const nameCell = row.querySelector(".js-name");
        if(nameCell) nameCell.textContent = semName;

        const hexCell = row.querySelector(".js-hex");
        if(hexCell) hexCell.innerHTML = "<code class='sp-code'>" + (hex || "—") + "</code>";

        const colorNameCell = row.querySelector(".js-colorname");
        if(colorNameCell) colorNameCell.innerHTML = "<code class='sp-code'>" + (hex ? nearestName(hex) : "—") + "</code>";
      }

      for (const row of document.querySelectorAll("tr[data-shadow]")){
        const token = row.getAttribute("data-shadow");
        const name = row.getAttribute("data-name") || token;
        const val = getVar(token);

        const nameCell = row.querySelector(".js-name");
        if(nameCell) nameCell.textContent = name;

        const valCell = row.querySelector(".js-val");
        if(valCell) valCell.innerHTML = "<code class='sp-code'>" + (val || "—") + "</code>";
      }

      for (const row of document.querySelectorAll("tr[data-textshadow]")){
        const token = row.getAttribute("data-textshadow");
        const name = row.getAttribute("data-name") || token;
        const val = getVar(token);

        const nameCell = row.querySelector(".js-name");
        if(nameCell) nameCell.textContent = name;

        const valCell = row.querySelector(".js-val");
        if(valCell) valCell.innerHTML = "<code class='sp-code'>" + (val || "—") + "</code>";
      }

      const linkVal = getVar("--sp-link");
      const linkHex = toHex(linkVal);
      const linkName = linkHex ? nearestName(linkHex) : "—";
      document.getElementById("link-meta").innerHTML =
        "<code class='sp-code'>" + (linkHex || "—") + "</code> &nbsp; <code class='sp-code'>" + linkName + "</code>";
    </script>
  </main>
</body>
</html>
